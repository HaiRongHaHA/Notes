# 可执行代码
- 全局代码
- eval代码
- 函数代码

# 词法环境
组成：环境记录项 + 可能为空的外部词法环境引用

特定代码：function、with、try、catch

## 环境记录项
声明式环境记录项 和 对象式环境记录项

- 声明式环境记录项用于定义那些将 标识符 与语言值直接绑定的 ECMA 脚
本语法元素，例如 函数定义 ， 变量定义 以及 Catch 语句。

- 对象式环境记录项用于定义那些将 标识符 与具体对象的属性绑定的 ECMA 脚本元素，例如 程
序 以及 With 表达式 。 

### 声明式词法环境
### 对象式词法环境
## 全局环境

# 执行环境——执行上下文栈
- 全局的用对象式词法环境
- 函数用声明式词法环境
- 全局和函数都会创建一个词法环境

## 全局执行上下文
### 初始化全局执行环境
1. 将变量环境设置为 全局环境 。
2. 将词法环境设置为 全局环境 。
3. 将 this 绑定设置为 全局对象 。

## 函数执行上下文

# 闭包
## 定义
- 一个函数和对其周围状态（lexical environment，词法环境）的引用捆绑在一起（或者说函数被引用包围）
- 闭包让你可以在一个内层函数中访问到其外层函数的作用域
- 广义的来说，每当创建一个函数，闭包就会在函数创建的同时被创建出来


广义的闭包：只要创建函数就会引用一个词法环境，就是闭包

狭义的闭包：函数执行上下文出栈后，但是它的被引用的词法环境不能被销毁，就是闭包。

闭包的本质：闭包是一种组合，函数和外部词法环境，绑在一起了，封闭了，就是闭包

标准只描述了存下来，没有说要怎么存？
chrome 做了v8优化，闭包只存需要的词法环境，封装一个闭包，放到堆里面
firefox 闭包则是全部存下来的

分离的DOM
dom节点在dom树中已经没了，在js还在，需要清理掉